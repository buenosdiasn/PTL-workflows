name: Deploy

on:
  repository_dispatch:
    types: [deploy_request]

jobs:
  deploy-frontend:
    if: ${{ github.event.client_payload.app == 'frontend' }}
    uses: ./workflows/feBuildAndPublish.yml@${{ github.event.client_payload.branch }}
    secrets: inherit

  deploy-backend:
    if: ${{ github.event.client_payload.app == 'backend' }}
    uses: ./workflows/beBuildAndPublish.yml@${{ github.event.client_payload.branch }}
    secrets: inherit
